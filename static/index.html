<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BEEP - Spirit Planning</title>
    <link rel="stylesheet" href="/static/style/style.css">
</head>
<body>
    <!-- Login Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <span class="close" onclick="closeLoginModal()">&times;</span>
                <h2>Вход в систему</h2>
            </div>
            <div class="modal-body">
                <div id="loginError" class="error" style="display: none;"></div>
                <form id="loginForm" onsubmit="handleLogin(event)">
                    <div class="form-group">
                        <label for="modalEmail">Email</label>
                        <input type="email" id="modalEmail" required>
                    </div>
                    <div class="form-group">
                        <label for="modalPassword">Пароль</label>
                        <input type="password" id="modalPassword" required>
                    </div>
                    <button type="submit" class="btn-primary">Войти</button>
                </form>
                <div class="divider" id="dividerOr" style="display: flex; align-items: center; justify-content: center; gap: 10px; margin: 20px 0;">
                    <span style="flex: 1; height: 1px; background: #e2e8f0;"></span>
                    <span style="color: #999;">или</span>
                    <span style="flex: 1; height: 1px; background: #e2e8f0;"></span>
                </div>
                <button class="btn-secondary" id="btnCreateAccount" onclick="showRegisterForm()">Создать аккаунт</button>
                
                <!-- Register Form (hidden by default) -->
                <div id="registerForm" style="display: none; margin-top: 20px;">
                    <form onsubmit="handleRegister(event)">
                        <div class="form-group">
                            <label for="regName">Имя</label>
                            <input type="text" id="regName" required>
                        </div>
                        <div class="form-group">
                            <label for="regEmail">Email</label>
                            <input type="email" id="regEmail" required>
                        </div>
                        <div class="form-group">
                            <label for="regPhone">Телефон</label>
                            <input type="tel" id="regPhone">
                        </div>
                        <div class="form-group">
                            <label for="regPassword">Пароль</label>
                            <input type="password" id="regPassword" required>
                        </div>
                        <button type="submit" class="btn-primary" style="margin-top: 10px;">Зарегистрироваться</button>
                        <button type="button" class="btn-secondary" onclick="hideRegisterForm()" style="margin-top: 10px; width: auto; display: block; margin-left: auto; margin-right: auto;">Войти</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div class="container">
        <header>
            <div style="display: flex; justify-content: space-between; align-items: center; width: 100%;">
                <div style="flex: 1;">
                    <h1>✨ BEEP</h1>
                    <p class="tagline">Auto service Booking System</p>
                </div>
                <button onclick="openLoginModal()" style="padding: 15px 30px; background: linear-gradient(135deg, var(--primary), var(--secondary)); color: white; border: none; border-radius: 30px; font-weight: 600; font-size: 24px; cursor: pointer; box-shadow: 0 2px 12px rgba(102, 126, 234, 0.3); white-space: nowrap; min-width: auto; width: auto; margin-right: 50px;">Войти</button>
            </div>
        </header>

        <div class="main-content">
            <div class="card">
                <h2>📚 Book Your Service</h2>
                
                <div class="form-group">
                    <label for="category">Category</label>
                    <select id="category" onchange="loadServices()">
                        <option value="">Select a category...</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="service">Service</label>
                    <select id="service" onchange="loadCars()">
                        <option value="">Select a service...</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="car">Car</label>
                    <select id="car">
                        <option value="">Select a car...</option>
                    </select>
                </div>

                <button onclick="calculatePrice()">💰 Calculate Price</button>
            </div>

            <div class="card">
                <h2>📅 Select Master & Time</h2>
                
                <div class="form-group">
                    <label for="master-dropdown">Master</label>
                    <div class="custom-dropdown" id="master-dropdown">
                        <div class="dropdown-header" onclick="toggleMasterDropdown()">
                            <span id="selected-master">Select a master...</span>
                            <span class="arrow">▼</span>
                        </div>
                        <div class="dropdown-body" id="master-dropdown-body" style="display: none;">
                            <div id="masters-container" class="masters-grid-dropdown">
                                <div class="loading">Loading masters...</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div style="margin-top: 20px;">
                    <label for="appointment-date" style="display: block; margin-bottom: 8px;">Date</label>
                    <input type="date" id="appointment-date" onchange="updateTimeSlots()" required>
                </div>

                <div style="margin-top: 15px;">
                    <label for="appointment-time" style="display: block; margin-bottom: 8px;">Time</label>
                    <select id="appointment-time">
                        <option value="">Select time slot...</option>
                    </select>
                </div>

                <div style="margin-top: 15px;">
                    <label for="comment" style="display: block; margin-bottom: 8px;">Comment (optional)</label>
                    <textarea id="comment" rows="3" placeholder="Any special instructions..."></textarea>
                </div>

                <button onclick="bookAppointment()" style="margin-top: 20px;">📅 Book Appointment</button>
            </div>
        </div>

        <div class="results" id="results" style="display: none;">
            <h2>📊 Results</h2>
            <div id="results-content"></div>
        </div>

        <div class="card" style="margin-top: 30px;">
            <h2>📋 My Appointments</h2>
            <button onclick="loadMyAppointments()">View My Appointments</button>
            <div id="appointments-list" style="margin-top: 20px;"></div>
        </div>
    </div>

    <script src="/static/script/script.js"></script>
</body>
</html>


